<!DOCTYPE html>
<html lang="en" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Docs to enable CaaS Switches&rsquo; time synchronization logic and set up TSN GCL (gate control list), switch forwarding rules (including to dual-DMA).">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/device/testbed/">
  <meta property="og:site_name" content="ZIGGO BOOK">
  <meta property="og:title" content="TestBed Setup Process">
  <meta property="og:description" content="Docs to enable CaaS Switches’ time synchronization logic and set up TSN GCL (gate control list), switch forwarding rules (including to dual-DMA).">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2024-05-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-05-01T00:00:00+00:00">
    <meta property="article:tag" content="ZIGGO-SWITCH">
    <meta property="article:tag" content="ZIGGO">
    <meta property="article:tag" content="Markdown">
    <meta property="og:image" content="http://localhost:1313/docs/device/testbed/featured.jpg">
<title>TestBed Setup Process | ZIGGO BOOK</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" >
<link rel="canonical" href="http://localhost:1313/docs/device/testbed/">
  <link rel="alternate" hreflang="zh" href="http://localhost:1313/zh/docs/device/testbed/" title="TestBed搭建流程">
<link rel="stylesheet" href="/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css" integrity="sha256-MJt&#43;0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.880afd6a6348ab60e7c50e6108464ff34c45db0bc79bb5f304f9cbda917a04c1.js" integrity="sha256-iAr9amNIq2DnxQ5hCEZP80xF2wvHm7XzBPnL2pF6BME=" crossorigin="anonymous"></script>

  

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" /><span>ZIGGO BOOK</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>



  



  
    
  


  


<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </label>

    <ul>
      
      <li>
        <a href="http://localhost:1313/zh/docs/device/testbed/">
          Chinese
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f7037f1d8c98cfd6af893e54a7a7c84a" class="toggle"  />
    <label for="section-f7037f1d8c98cfd6af893e54a7a7c84a" class="flex justify-between">
      <a href="/docs/tsnperf/" class="">ZIGGO TSNPerf</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tsnperf/principle/" class="">TSNPerf Design Principles</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tsnperf/configuration/" class="">TSNPerf User Guide</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tsnperf/manual/" class="">TSNPerf Test Content and Usage Table</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tsnperf/report/" class="">Report for Brand A Switch</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d43c4f20a039dd2c08c63c6629ffaedf" class="toggle"  />
    <label for="section-d43c4f20a039dd2c08c63c6629ffaedf" class="flex justify-between">
      <a href="/docs/switch/" class="">ZIGGO Switch</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/switch/basic_knowledge/" class="">List of Basic Knowledge</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/switch/require/" class="">Preparation Checklist</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/switch/system-design/" class="">System Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/switch/hardware-build/" class="">Hardware Build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/switch/software-build/" class="">Software Build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/switch/contributing/" class="">How to contribute</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9944d1fadd4ce8adc7644b141d205c6b" class="toggle" checked />
    <label for="section-9944d1fadd4ce8adc7644b141d205c6b" class="flex justify-between">
      <a href="/docs/device/" class="">ZIGGO Device</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/device/basic_knowledge/" class="">List of Basic Knowledge</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/require/" class="">Preparation Checklist</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/getting-started/" class="">Getting start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/system-design/" class="">System Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/hardware-build/" class="">Hardware Build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/software-build/" class="">Software Build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/ziggo_device_manual/" class="">ZIGGO Device Manual</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/cnc_manual/" class="">CNC Script Usage Guide</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/testbed/" class="active">TestBed Setup Process</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/device/contributing/" class="">How to contribute</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>TestBed Setup Process</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <div style="margin-top:10px; margin-bottom:40px; display:flex; justify-content:center; gap: 25px;">
    <a href="https://github.com/MobiSense/ziggo_book" style="padding: 10px 10px;
	background-color: rgb(0, 0, 0); /* 设置按钮背景色为橙色 */
	color: white; /* 设置按钮文字颜色为白色 */
	text-decoration: none; /* 去除链接的下划线 */
	border: 3px solid rgb(0, 0, 0);
	border-radius: 5px; /* 设置按钮的边角为圆角 */
	font-size: 14px; /* 设置文字大小 */
	text-align: center; /* 按钮内文字居中显示 */
	display: inline-block; /* 使链接的布局表现为块级元素 */">GitHub</a>
    <a href="https://mobisense.github.io/ziggo_homepage/" style="padding: 10px 10px;
	background-color: rgb(0, 0, 0); /* 设置按钮背景色为橙色 */
	color: white; /* 设置按钮文字颜色为白色 */
	text-decoration: none; /* 去除链接的下划线 */
	border: 3px solid rgb(0, 0, 0);
	border-radius: 5px; /* 设置按钮的边角为圆角 */
	font-size: 14px; /* 设置文字大小 */
	text-align: center; /* 按钮内文字居中显示 */
	display: inline-block; /* 使链接的布局表现为块级元素 */">Home</a>
</div>

<nav id="TableOfContents">
  <ul>
    <li><a href="#table-of-contents">Table of Contents</a></li>
    <li><a href="#introduction-to-testbed">Introduction to TestBed</a></li>
    <li><a href="#interconnectivity-testing-project-introduction">Interconnectivity Testing Project Introduction</a>
      <ul>
        <li><a href="#1-benchmark-testing">1. Benchmark Testing</a></li>
        <li><a href="#2-gate-control-capabilities">2. Gate Control Capabilities</a></li>
        <li><a href="#3-bandwidth-assurance">3. Bandwidth Assurance</a></li>
        <li><a href="#4-gate-control-precision">4. Gate Control Precision</a></li>
      </ul>
    </li>
    <li><a href="#device-parameter-settings-and-deployment">Device Parameter Settings and Deployment</a></li>
    <li><a href="#testbed-operation-process">TestBed Operation Process</a>
      <ul>
        <li><a href="#preparation">Preparation</a></li>
        <li><a href="#benchmark-testing">Benchmark Testing</a></li>
        <li><a href="#gate-control-capabilities">Gate Control Capabilities</a></li>
        <li><a href="#bandwidth-assurance">Bandwidth Assurance</a></li>
        <li><a href="#gate-control-precision">Gate Control Precision</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="testbed-setup-process">
  TestBed Setup Process
  <a class="anchor" href="#testbed-setup-process">#</a>
</h1>
<h2 id="table-of-contents">
  Table of Contents
  <a class="anchor" href="#table-of-contents">#</a>
</h2>
<ul>
<li><a href="#testbed-setup-process">TestBed Setup Process</a>
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#introduction-to-testbed">Introduction to TestBed</a></li>
<li><a href="#interconnectivity-testing-project-introduction">Interconnectivity Testing Project Introduction</a>
<ul>
<li><a href="#1-benchmark-testing">1. Benchmark Testing</a></li>
<li><a href="#2-gate-control-capabilities">2. Gate Control Capabilities</a></li>
<li><a href="#3-bandwidth-assurance">3. Bandwidth Assurance</a></li>
<li><a href="#4-gate-control-precision">4. Gate Control Precision</a></li>
</ul>
</li>
<li><a href="#device-parameter-settings-and-deployment">Device Parameter Settings and Deployment</a></li>
<li><a href="#testbed-operation-process">TestBed Operation Process</a>
<ul>
<li><a href="#preparation">Preparation</a>
<ul>
<li><a href="#control-script-preparation">Control Script Preparation</a></li>
<li><a href="#background-traffic-sending">Background Traffic Sending</a></li>
</ul>
</li>
<li><a href="#benchmark-testing">Benchmark Testing</a></li>
<li><a href="#gate-control-capabilities">Gate Control Capabilities</a></li>
<li><a href="#bandwidth-assurance">Bandwidth Assurance</a></li>
<li><a href="#gate-control-precision">Gate Control Precision</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="introduction-to-testbed">
  Introduction to TestBed
  <a class="anchor" href="#introduction-to-testbed">#</a>
</h2>
<p>We have conducted interconnectivity tests on our internally developed CaaS-Switch, using the following network topology.</p>
<p><img src="./topo.PNG" alt="topo" /></p>
<p>This demo requires 4 FPGA development boards (2 TSNPerf, 2 CaaS-Switch) and 1 standard PC. If resources are limited or a simplified topology is considered, one CaaS-Switch can be omitted. The PC is responsible for sending background traffic, indicated by black arrows; the left TSNPerf sends test traffic (critical traffic), indicated by red arrows.</p>
<p>All test projects generally follow two phases:</p>
<ol>
<li>
<p>Time Synchronization: Start time synchronization to ensure TSNPerf and CaaS-Switch are under the same clock domain.</p>
<p>Note: The time synchronization program runs on the TSNPerf and CaaS-Switch systems.</p>
</li>
<li>
<p>Sending Test Traffic: According to the schedule.json file, TSNPerf sends test traffic.</p>
</li>
</ol>
<h2 id="interconnectivity-testing-project-introduction">
  Interconnectivity Testing Project Introduction
  <a class="anchor" href="#interconnectivity-testing-project-introduction">#</a>
</h2>
<h3 id="1-benchmark-testing">
  1. Benchmark Testing
  <a class="anchor" href="#1-benchmark-testing">#</a>
</h3>
<ul>
<li>Objective: Test the end-to-end delay, packet loss rate, and jitter of high-priority traffic without background traffic as a comparative baseline.</li>
<li>Expectation: Delay meets the plan, and jitter is low (around 100ns).</li>
</ul>
<h3 id="2-gate-control-capabilities">
  2. Gate Control Capabilities
  <a class="anchor" href="#2-gate-control-capabilities">#</a>
</h3>
<ul>
<li>Objective: Test the effect of traffic scheduling under general conditions, and the gate control capabilities between two switches.</li>
<li>Approach:
<ul>
<li>Background traffic (VLAN priority = 0) is set to line speed, reserving a slot of length 3 for high-priority traffic in each scheduling period.</li>
</ul>
<ol>
<li>Send 4 packets of high-priority (VLAN priority = 1) test traffic each cycle, each packet 1500Bytes, recording end-to-end average delay, jitter, packet loss rate, and arrival order.</li>
<li>Send 8 packets of high-priority (VLAN priority = 1) test traffic each cycle, recording if only n packets pass each cycle.</li>
</ol>
</li>
<li>Expectations:
<ol>
<li>Delay, jitter, and packet loss rate consistent with the baseline.</li>
<li>When sending 4 packets per cycle, packet loss rate is 0.</li>
<li>When sending 8 packets per cycle, only 5 packets pass each cycle (every 8 packets drop 3, as exactly the fifth packet can be sent out in each slot, the remaining three packets are dropped), packet loss rate is 37.5%.</li>
</ol>
</li>
</ul>
<h3 id="3-bandwidth-assurance">
  3. Bandwidth Assurance
  <a class="anchor" href="#3-bandwidth-assurance">#</a>
</h3>
<ul>
<li>Objective: Test the switch&rsquo;s ability to reserve bandwidth and that the priority mapping, operation cycle, and offset of the two switches are essentially consistent.</li>
<li>Approach:
<ul>
<li>Background traffic (VLAN priority = 0) is set to line speed (1Gbps), configuring the switch to reserve 50% of the slot for high-priority traffic (VLAN priority = 1), the other 50% only allows low-priority traffic.</li>
</ul>
<ol>
<li>High-priority (VLAN priority = 1) test traffic is set to line speed (tests show that sending 2752 packets of 1500B each cycle [33ms] nearly reaches 1000Mbps), recording end-to-end average delay, jitter, packet loss rate, and arrival order.</li>
<li>High-priority (VLAN priority = 1) test traffic is set to 50% line speed (sending 1376 packets of 1500B each cycle [33ms]), recording end-to-end average delay, jitter, packet loss rate, and arrival order.</li>
</ol>
</li>
<li>Expectations:
<ol>
<li>High-priority test traffic at 100% line speed: Delay and jitter consistent with the baseline, packet loss rate around 50%.
2.</li>
</ol>
</li>
</ul>
<p>High-priority test traffic at 50% line speed: Delay and jitter consistent with the baseline, 0 packet loss rate.</p>
<h3 id="4-gate-control-precision">
  4. Gate Control Precision
  <a class="anchor" href="#4-gate-control-precision">#</a>
</h3>
<ul>
<li>Objective: Test the setting precision of gate control slot length.</li>
<li>Approach: (n=1,2,4,8,&hellip;)
<ol>
<li>Reserve a slot of length 1 for high-priority traffic each scheduling period.</li>
<li>Send n packets of high-priority (VLAN priority = 1) test traffic each cycle, each packet length of 1/n*1500Byte, recording if n packets pass each cycle.
<ul>
<li>n=1,</li>
</ul>
</li>
</ol>
</li>
<li>Expectations:
<ol>
<li>In cases n=1,2,4,8, all packets pass each cycle.</li>
</ol>
</li>
</ul>
<blockquote>
<p>If you use our open-source ZIGGO switch and TSNPerf as configured below, you can achieve effects similar to the expected outcomes in the four tests above. If any issues arise, feel free to raise an issue on GitHub.</p>
</blockquote>
<h2 id="device-parameter-settings-and-deployment">
  Device Parameter Settings and Deployment
  <a class="anchor" href="#device-parameter-settings-and-deployment">#</a>
</h2>
<p>Switch software and hardware code is available in the repository <a href="https://github.com/mobisense/Ziggo-CaaS-Switch">ZIGGO-Caas-Switch</a>, use the main branch.</p>
<p>TSNPerf&rsquo;s software and hardware code are in this repository.</p>
<blockquote>
<p>Note: For bandwidth capability testing, TSNPerf must use the offline_analyze branch; for gate control precision testing, TSNPerf must use the packet_resize branch [for customizing test packet size]. Do not forget to switch branches during testing.</p>
</blockquote>
<p>All devices&rsquo; IP, MAC, and ID are shown below, corresponding to the JSON configuration file provided later:</p>
<p><img src="./topo_config.png" alt="topo config" /></p>
<p>The corresponding config file can be seen in <code>config.json</code>.</p>
<h2 id="testbed-operation-process">
  TestBed Operation Process
  <a class="anchor" href="#testbed-operation-process">#</a>
</h2>
<h3 id="preparation">
  Preparation
  <a class="anchor" href="#preparation">#</a>
</h3>
<h4 id="control-script-preparation">
  Control Script Preparation
  <a class="anchor" href="#control-script-preparation">#</a>
</h4>
<p>Refer to <a href="/ziggo_book/docs/device/cnc_manual/">CNC-User-Manual</a></p>
<h4 id="background-traffic-sending">
  Background Traffic Sending
  <a class="anchor" href="#background-traffic-sending">#</a>
</h4>
<p>Can be directly executed on a Linux PC using the <code>send.py</code> script (requires installing scapy, tcpreplay).</p>
<h3 id="benchmark-testing">
  Benchmark Testing
  <a class="anchor" href="#benchmark-testing">#</a>
</h3>
<p>Switch and TSNPerf both use the main branch.</p>
<p>Testing Steps:</p>
<ol>
<li>Modify batch.mjs to the correct configuration file name.</li>
<li>./batch.mjs pull (ensure correct branch).</li>
<li>./batch.mjs distribute:
<ul>
<li>Each Device sends 4 packets, each Switch reserves 3 slots, distribute the following two configuration files:
<ul>
<li><code>base/d3s2-baseline-3t-config.json</code>,</li>
<li><code>base/d3s2-baseline-3t-schedule-base.json</code>.</li>
</ul>
</li>
</ul>
</li>
<li>./batch.mjs launch (includes time synchronization and packet sending).</li>
<li>./batch.mjs collect.</li>
</ol>
<h3 id="gate-control-capabilities">
  Gate Control Capabilities
  <a class="anchor" href="#gate-control-capabilities">#</a>
</h3>
<p>Switch and TSNPerf both use the main branch.</p>
<ol>
<li>Enable background traffic Device to send packets (not required for benchmark testing).</li>
<li>Modify batch.mjs to the correct configuration file name.</li>
<li>./batch.mjs pull (ensure correct branch).</li>
<li>./batch.mjs distribute:
<ul>
<li>Device1 sends 4 packets each time, each Switch reserves 3 slots, distribute the following two configuration files:
<ul>
<li><code>gate/d3s2-baseline-3t-config.json</code>,</li>
<li><code>gate/d3s2-baseline-3t-schedule-gate.json</code>.</li>
</ul>
</li>
</ul>
</li>
<li>./batch.mjs launch.</li>
<li>./batch.mjs collect.</li>
<li>Modify the schedule.json in the above to change the number of packets sent by Device from 4 to 8, then retest from step 4 above, the modified schedule.json is shown below:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;link&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;from&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;to&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;from_port&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">7</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;schedule&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;period&#34;</span>: <span style="color:#ae81ff">2048</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#ae81ff">8</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;job_id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&#34;flow_id&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}<span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><h3 id="bandwidth-assurance">
  Bandwidth Assurance
  <a class="anchor" href="#bandwidth-assurance">#</a>
</h3>
<p>Switch uses the main branch, TSNPerf uses the offline_analyze branch.</p>
<p>Testing Steps:</p>
<ol>
<li>
<p>Enable background traffic Device to send packets (not required for benchmark testing).</p>
</li>
<li>
<p>Modify batch.mjs to the correct configuration file name.</p>
</li>
<li>
<p>./batch.mjs pull (ensure correct branch).</p>
</li>
<li>
<p>./batch.mjs distribute:</p>
<ul>
<li>Device1 sends 1376 packets each time, each Switch reserves 1024 slots, distribute the following two configuration files:
<ul>
<li><code>bandwidth/d3s2-baseline-50%t-config.json</code>,</li>
<li><code>bandwidth/d3s2-baseline-50%t-schedule.json</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>./batch.mjs launch.</p>
</li>
<li>
<p>Use offline analysis.</p>
</li>
<li>
<p>Modify the schedule.json in the above to change the number of packets sent by Device from 1376 to 2752, then retest from</p>
</li>
</ol>
<p>step 4 above, the modified schedule.json is shown below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;link&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;from&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;to&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;from_port&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">7</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;schedule&#34;</span>: [
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;period&#34;</span>: <span style="color:#ae81ff">2048</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#ae81ff">2752</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;job_id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;flow_id&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> ]
</span></span><span style="display:flex;"><span>}<span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div><h3 id="gate-control-precision">
  Gate Control Precision
  <a class="anchor" href="#gate-control-precision">#</a>
</h3>
<p>Switch uses the main branch, TSNPerf uses the packet_resize branch.</p>
<ol>
<li>
<p>Modify batch.mjs to the correct configuration file name.</p>
</li>
<li>
<p>./batch.mjs pull (ensure correct branch).</p>
</li>
<li>
<p>./batch.mjs distribute:</p>
<ul>
<li>Device1 sends 1 packet of 1500B each time, each Switch reserves 1 slot, distribute the following two configuration files:
<ul>
<li><code>accuracy/d3s2-baseline-1t-config.json</code>,</li>
<li><code>accuracy/d3s2-baseline-1t-schedule.json</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>./batch.mjs launch.</p>
</li>
<li>
<p>./batch.mjs collect.</p>
</li>
<li>
<p>Modify the schedule.json in the above to change the number of packets sent by Device from 1 to 2, 4, 8 respectively, and the packet size to 750, 375, and 187 respectively, then retest from step 4 above, the modified schedule.json for sending 2 packets is shown below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;link&#34;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;from&#34;</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;to&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;from_port&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;id&#34;</span>: <span style="color:#ae81ff">7</span>,
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&#34;schedule&#34;</span>: [
</span></span><span style="display:flex;"><span>     {
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;period&#34;</span>: <span style="color:#ae81ff">2048</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;end&#34;</span>: <span style="color:#ae81ff">2</span>, 
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;pkt_size&#34;</span>: <span style="color:#ae81ff">750</span>, <span style="color:#75715e">// 1500/2 = 750 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#f92672">&#34;job_id&#34;</span>: <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&#34;flow_id&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> ]
</span></span><span style="display:flex;"><span>}<span style="color:#960050;background-color:#1e0010">,</span>
</span></span></code></pre></div></li>
</ol>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">




  <div>
    <a class="flex align-center" href="https://github.com/Mobisense/ziggo_book///tree/main//content/docs/device/testbed/index.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        <footer id="mu-footer" role="contentinfo" style="	height: 160px;
clear: both;
color: #000000;
text-align: center;
padding-top: 100px;">
    <div class="container">
        <div class="col-sm-12">
            <div>
                <p> Room 211, District 11, East Main Building, Tsinghua University, Haidian District, Beijing, China, 100084 | </p>
                <p> &copy 2021 <span class="ziggo-font">ZIGGO</span>, TNS, School of Software, Tsinghua University . All rights reserved. </p>
            </div>
        </div>
    </div>
</footer>
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  <div style="margin-top:10px; margin-bottom:40px; display:flex; justify-content:center; gap: 25px;">
    <a href="https://github.com/MobiSense/ziggo_book" style="padding: 10px 10px;
	background-color: rgb(0, 0, 0); /* 设置按钮背景色为橙色 */
	color: white; /* 设置按钮文字颜色为白色 */
	text-decoration: none; /* 去除链接的下划线 */
	border: 3px solid rgb(0, 0, 0);
	border-radius: 5px; /* 设置按钮的边角为圆角 */
	font-size: 14px; /* 设置文字大小 */
	text-align: center; /* 按钮内文字居中显示 */
	display: inline-block; /* 使链接的布局表现为块级元素 */">GitHub</a>
    <a href="https://mobisense.github.io/ziggo_homepage/" style="padding: 10px 10px;
	background-color: rgb(0, 0, 0); /* 设置按钮背景色为橙色 */
	color: white; /* 设置按钮文字颜色为白色 */
	text-decoration: none; /* 去除链接的下划线 */
	border: 3px solid rgb(0, 0, 0);
	border-radius: 5px; /* 设置按钮的边角为圆角 */
	font-size: 14px; /* 设置文字大小 */
	text-align: center; /* 按钮内文字居中显示 */
	display: inline-block; /* 使链接的布局表现为块级元素 */">Home</a>
</div>

<nav id="TableOfContents">
  <ul>
    <li><a href="#table-of-contents">Table of Contents</a></li>
    <li><a href="#introduction-to-testbed">Introduction to TestBed</a></li>
    <li><a href="#interconnectivity-testing-project-introduction">Interconnectivity Testing Project Introduction</a>
      <ul>
        <li><a href="#1-benchmark-testing">1. Benchmark Testing</a></li>
        <li><a href="#2-gate-control-capabilities">2. Gate Control Capabilities</a></li>
        <li><a href="#3-bandwidth-assurance">3. Bandwidth Assurance</a></li>
        <li><a href="#4-gate-control-precision">4. Gate Control Precision</a></li>
      </ul>
    </li>
    <li><a href="#device-parameter-settings-and-deployment">Device Parameter Settings and Deployment</a></li>
    <li><a href="#testbed-operation-process">TestBed Operation Process</a>
      <ul>
        <li><a href="#preparation">Preparation</a></li>
        <li><a href="#benchmark-testing">Benchmark Testing</a></li>
        <li><a href="#gate-control-capabilities">Gate Control Capabilities</a></li>
        <li><a href="#bandwidth-assurance">Bandwidth Assurance</a></li>
        <li><a href="#gate-control-precision">Gate Control Precision</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












